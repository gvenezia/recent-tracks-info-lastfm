(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t){},165:function(e,t){},167:function(e,t){},201:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),i=n.n(c),s=n(7),o=n(10),u=n(77),l=n(13),m=n(14),d=n(16),f=n(15),p=n(17),g=n(78),h=n.n(g),v=n(29),b=n.n(v),E=n(44),y=n.n(E),N=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=function(e){return"undefined"!==typeof e},t=this.props,n=t.song,a=t.artist,c=t.artists,i=t.date,s=c.find(function(e){return e.name===a}),o=["seen live","fip","under 2000 listeners","nickelodeon","".concat(a)],u=[];return e(s)&&(u=s.tags.tag.filter(function(e){return-1===o.indexOf(e.name)})),r.a.createElement("div",{style:{marginTop:"14px"},className:"stackable eight wide column"},r.a.createElement("div",{className:"ui items segment"},r.a.createElement("div",{className:"ui item "},r.a.createElement("div",{style:{width:"250px"},className:"image"},r.a.createElement("img",{alt:"album art",src:n.image[3]["#text"].length>0?n.image[3]["#text"]:"https://semantic-ui.com/images/wireframe/image.png"})),r.a.createElement("div",{className:"content"},r.a.createElement("p",{className:"header"},'"',n.name,'"'),r.a.createElement("div",{className:"meta"},r.a.createElement("span",{className:"date"},!0===e(n["@attr"])?"Currently listening":i)),r.a.createElement("div",{className:"description"},r.a.createElement("span",{"data-tip":e(s)?s.stats.userplaycount:"N/A","data-for":a+"-featured-tip"},a)," \u2014 ",n.album["#text"]),r.a.createElement("div",{className:"extra"},r.a.createElement("p",null,r.a.createElement("i",{className:"info icon"}),e(s)&&(s.bio.content.length<1?"N/A":s.bio.content.length<=375?y()(s.bio.content):y()(s.bio.content.slice(0,375)+"..."))),r.a.createElement("p",null,r.a.createElement("i",{className:"music icon"}),u.map(function(e,t){return t+1===u.length?"".concat(e.name):"".concat(e.name,", ")})),r.a.createElement(b.a,{getContent:function(e){return"Plays: ".concat(e)},id:a+"-featured-tip",place:"left",type:"dark",effect:"float"}))))))}}]),t}(a.Component),O=Object(s.b)(function(e){return{artists:e.artists}})(N),x=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"renderList",value:function(){var e=function(e){return"undefined"!==typeof e},t=this.props,n=t.songs,a=t.artists;return n.map(function(t,n){var c=e(t.name)?t.name:"N/A",i=e(t.artist)?t.artist["#text"]:"N/A",s=e(t.album)?t.album["#text"]:"N/A",o=e(t.date)?h.a.unix(t.date.uts).fromNow():"N/A",u=a.find(function(e){return e.name===i}),l=["".concat(i),"seen live","fip","under 2000 listeners","nickelodeon"],m=[];return e(u)&&(m=u.tags.tag.filter(function(e){return-1===l.indexOf(e.name)})),n<2?r.a.createElement(O,{song:t,artist:i,date:o,key:n}):r.a.createElement("div",{key:n,style:{marginTop:"14px"},className:"stackable four wide column"},r.a.createElement("div",{className:"ui card"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{alt:"album art",src:t.image[3]["#text"].length>0?t.image[3]["#text"]:"https://semantic-ui.com/images/wireframe/image.png"})),r.a.createElement("div",{className:"content"},r.a.createElement("p",{className:"header"},'"',c,'"'),r.a.createElement("div",{className:"meta"},r.a.createElement("span",{className:"date"},o)),r.a.createElement("div",{className:"description"},r.a.createElement("span",{"data-tip":e(u)?u.stats.userplaycount:"N/A","data-for":i+"tip"},i)," \u2014 ",s)),r.a.createElement("div",{className:"extra content"},r.a.createElement("p",null,r.a.createElement("i",{className:"info icon"}),e(u)?u.bio.content.slice(0,100)+"...":"Loading..."),r.a.createElement("p",null,r.a.createElement("i",{className:"music icon"}),m.map(function(e,t){return t+1===m.length?"".concat(e.name):"".concat(e.name,", ")})),r.a.createElement(b.a,{getContent:function(e){return"Plays: ".concat(e)},id:i+"tip",place:"left",type:"dark",effect:"float"}))))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui stackable relaxed grid"},this.renderList())}}]),t}(a.Component),j=Object(s.b)(function(e){return{songs:e.songs,artists:e.artists,user:e.user}})(x),k=n(12),w=n.n(k),A=n(31),S=n(18),C=n.n(S),T=n(79),I=n.n(T).a.create({baseURL:"https://ws.audioscrobbler.com/2.0/"}),R=new(0,n(159).Client)("WhatIsPlayingLastFM/1.0",{consumerKey:"DppIYtxGVQlPOvRJacAr",consumerSecret:"SoHlTcKDWajSgJTcNgWwHxlhlAGLdZPu"}),H="&api_key=".concat("6d617a8090718a0e68ecb4c49860f346","&format=json"),L=(R.database(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(A.a)(w.a.mark(function t(n,a){var r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.get("?method=user.getrecenttracks\n\t\t&user=".concat(e,"\n\t\t&limit=17\n\t\t").concat(H));case 2:r=t.sent,console.log(r),n({type:"FETCH_SONGS",payload:r.data.recenttracks.track});case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=Object(A.a)(w.a.mark(function n(a){var r,c;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=encodeURIComponent(e),n.next=3,I.get("?method=artist.getinfo\n\t\t&artist=".concat(r,"\n\t\t&user=").concat(t,"\n\t\t").concat(H));case 3:c=n.sent,a({type:"FETCH_ARTIST",payload:c.data.artist});case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},P=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.setUser(),this.props.fetchSongsAndArtists(),this.checkAPI()}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"checkAPI",value:function(){var e=this;setInterval(function(){console.log("Checking for Last.fm updates"),e.props.fetchSongsAndArtists()},5e3)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("h1",null,"What Has Gaetano","\xa0Been Listening to?"),r.a.createElement(j,null))}}]),t}(a.Component),U=Object(s.b)(function(e){return{user:e.user,credits:e.credits}},{setUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grrtano";return function(t){t({type:"SET_USER",payload:e})}},fetchSongsAndArtists:function(){return function(){var e=Object(A.a)(w.a.mark(function e(t,n){var a,r,c,i,s,o,u,l,m;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURIComponent(n().user),r=C.a.uniq(C.a.map(n().songs,"mbid")),e.next=4,t(L(a));case 4:c=n(),i=c.songs,s=c.artists,o=(o=i.filter(function(e,t,n){return n.map(function(e){return e.url}).indexOf(e.url)===t})).filter(function(e){return-1===r.indexOf(e.mbid)}),console.log(o),u=C.a.uniq(C.a.map(i,"artist[#text]")),l=C.a.map(s,"name"),(m=u.filter(function(e){return-1===l.indexOf(e)})).length>0&&m.forEach(function(e){return t(_(e,a))});case 12:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}})(P),F=n(30),D=Object(o.c)({artists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ARTIST":return[].concat(Object(F.a)(e),[t.payload]);default:return e}},credits:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CREDITS":return[].concat(Object(F.a)(e),[t.payload]);default:return e}},songs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SONGS":return t.payload;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;default:return e}}});console.clear(),i.a.render(r.a.createElement(s.a,{store:Object(o.d)(D,Object(o.a)(u.a))},r.a.createElement(U,null)),document.querySelector("#root"))},80:function(e,t,n){e.exports=n(201)}},[[80,1,2]]]);
//# sourceMappingURL=main.cadabdcb.chunk.js.map